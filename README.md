# SMM Planer — сервис для автоматической публикации постов в Telegram, VK и "Одноклассники" #

SMM Planer — это автономный инструмент для автоматической публикации постов в социальные сети: Telegram, ВКонтакте и Одноклассники. Он считывает запланированные посты из Google-таблицы определенного формата, скачивает медиафайлы при необходимости, приводит текст в порядок и публикует контент точно в заданное время.

## Технические возможности ##

- Чтение плана публикации контента из Google-таблицы и публикация в заданное время для каждой соцсети;
- Поддержка публикации текста и медиафайлов (статичных изображений и .gif);
- Внесение в таблицу отметок об опубликованных постах;
- Мгновенная публикация постов, если дата не указана, и публикация ранее не вышедших постов;
- Автоматическая коррекция текста (кавычки, тире);
- Использование изображений по URL либо по ссылке на Google Drive;
- Запуск в фоновом режиме (проверка таблицы раз в 60 секунд и постинг материалов, готовых к публикации);
- Публикация в несколько каналов / групп в соцсетях.

## Ограничения ##

- Не более одного медиафайла в каждой публикации;
- Все материалы, размещенные на Google Drive (календарь публикаций, изображения и Google-документы с текстами постов) должны быть доступны по прямой ссылке;
- Для работы требуются токены API VK, Telegram (токен бота), OK, а также сервисов Google;
- Таблица с публикациями должна соответствовать образцу, описанному в документации.

## Установка и запуск ##

Для начала работы необходимо скачать репозиторий, установить виртуальное окружение (из-за технических особенностей потребуется Python версии 3.10 либо ниже) и зависимости. 

```Shell
git clone https://github.com/yourusername/smm-planer.git
cd smm-planer

python3.10 -m venv .venv
source .venv/bin/activate

pip install -r requirements.txt
```

После этого переименуйте файл `.env.example` в `.env` и добавьте в него все необходимые токены, процесс получения которых описан ниже.

### Получение токенов ###

Для получения токена бота в Telegram необходимо обратиться к боту [BotFather](https://telegram.me/BotFather). Следуйте простым инструкциям по регистрации бота, а после получения токена добавить его в .env (`TG_TOKEN=`). Далее следует добавить созданного бота в качестве администратора во все каналы, в которых планируется осуществлять автоматическую публикацию постов из таблицы Google.

<!-- TODO: Добавить инструкцию по токенам ОК -->
<!-- TODO: Добавить инструкцию по токенам ВК -->
<!-- TODO: Добавить инструкцию по токенам Google -->

### Создание календаря публикаций ###

Для использования скрипта потребуется календарь-таблица публикаций определенного образца. Вы можете скопировать таблицу [по ссылке](https://docs.google.com/spreadsheets/d/1-YrbMs7EHixx-j75aRIipwDNHG7FE5XrZEgjdG25F1c/edit?gid=0#gid=0), либо создать ее самостоятельно, следуя образцу:

| post\_id | google\_doc | media | vk\_pages | vk\_date | vk\_time | vk\_published | tg\_pages | tg\_date | tg\_time | tg\_published | ok\_pages | ok\_date | ok\_time | ok\_published |
| -------- | ----------- | ----- | --------- | -------- | -------- | ------------- | --------- | -------- | -------- | ------------- | --------- | -------- | -------- | ------------- |
|          |             |       |           |          |          |               |           |          |          |               |           |          |          |               |
|          |             |       |           |          |          |               |           |          |          |               |           |          |          |               |
|          |             |       |           |          |          |               |           |          |          |               |           |          |          |               |

Обратите внимание, что в настройках доступа следует указать, чтобы таблица была доступна по ссылке для всех

### Как следует пользоваться таблицей ###

Каждая строка таблицы — это один пост, который может быть запланирован для трех социальных сетей; для каждой из соцсетей может быть указано более одного ресурса (указываются в соответствующем поле через запятую), также для каждой из соцсетей могут быть выбраны свои дата и время публикации.

**Поля для заполнения**:

- post_id — любой уникальный идентификатор (можно просто 1, 2, 3...);
- google_doc — ссылка на Google-документ с текстом поста (должен быть открыт для чтения);
- media — ссылка на изображение или gif (прямой URL или Google Drive-файл с доступом "по ссылке");
- *_pages — список страниц/групп (например, @mychannel, mygroup1,mygroup2);
- *_date и *_time — дата и время публикации. Если не указаны — пост будет опубликован немедленно;
- *_published — заполняется автоматически скриптом после успешной публикации ("Опубликовано").

**Что важно учитывать**:

- Если дата и время в прошлом, а *_published не отмечено, пост будет опубликован при следующей проверке.
- Если дата/время не указаны, пост считается "без отложки" и публикуется сразу.
- Если ни один из блоков vk_, tg_ или ok_ не заполнен — пост будет пропущен.

## Цель проекта ##

Код написан в учебных целях — это задание в курсе по Python и веб-разработке на [Devman.org](https://dvmn.org).